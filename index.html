<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Reading Mock Test</title>
    <!-- Font Awesome for modern icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #f94144;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Reading Interface - Split Screen */
        .reading-container {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
            height: 80vh;
            display: flex;
            flex-direction: column;
        }

        .reading-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: white;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            font-size: 14px;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 6px;
            transition: var(--transition);
            text-decoration: none;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .test-info h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 20px;
            font-weight: 600;
        }

        .test-info p {
            font-size: 14px;
            opacity: 0.9;
        }

        .timer {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
        }

        .timer.warning {
            background: rgba(248, 150, 30, 0.2);
            color: #ffd166;
        }

        .timer.danger {
            background: rgba(249, 65, 68, 0.2);
            color: #ffa8a9;
        }

        /* Split Screen Content */
        .split-screen {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .passage-panel {
            flex: 0 0 50%;
            overflow-y: auto;
            padding: 30px;
            border-right: 2px solid var(--light-gray);
            position: relative;
        }

        .questions-panel {
            flex: 0 0 50%;
            overflow-y: auto;
            padding: 30px;
        }

        /* Resize Handle */
        .resize-handle {
            position: absolute;
            top: 0;
            right: -5px;
            width: 10px;
            height: 100%;
            background: var(--light-gray);
            cursor: col-resize;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .resize-handle:hover {
            background: var(--primary);
        }

        .resize-handle::after {
            content: '⋮';
            color: var(--gray);
            font-size: 12px;
            letter-spacing: 2px;
        }

        .resize-handle:hover::after {
            color: white;
        }

        /* Passage Content */
        .passage-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-gray);
        }

        .passage-header h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .instruction-box {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            margin-bottom: 25px;
        }

        .instruction-box i {
            color: var(--primary);
            margin-right: 10px;
        }

        .passage-content {
            font-size: 16px;
            line-height: 1.8;
        }

        .passage-content p {
            margin-bottom: 20px;
            text-align: justify;
        }

        .highlight-line {
            background: rgba(67, 97, 238, 0.1);
            padding: 2px 4px;
            border-radius: 3px;
        }

        /* Questions */
        .question-type {
            margin-bottom: 30px;
            background: var(--light);
            padding: 20px;
            border-radius: var(--border-radius);
            border: 2px solid var(--light-gray);
        }

        .question-type-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-gray);
        }

        .question-type-title {
            font-family: 'Poppins', sans-serif;
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }

        .question-type-instruction {
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 15px;
        }

        .question-item {
            margin-bottom: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .question-item:hover {
            border-color: var(--primary);
        }

        .question-number {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .question-number .status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--light-gray);
        }

        .question-number .status.answered {
            background: var(--success);
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .radio-group {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            padding: 10px 15px;
            border-radius: 8px;
            transition: var(--transition);
        }

        .radio-group:hover {
            background: rgba(67, 97, 238, 0.05);
        }

        .radio-group input[type="radio"] {
            display: none;
        }

        .custom-radio {
            width: 20px;
            height: 20px;
            border: 2px solid var(--gray);
            border-radius: 50%;
            position: relative;
            transition: var(--transition);
            flex-shrink: 0;
        }

        .radio-group input[type="radio"]:checked + .custom-radio {
            border-color: var(--primary);
        }

        .radio-group input[type="radio"]:checked + .custom-radio:after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: var(--primary);
            border-radius: 50%;
        }

        .radio-label {
            font-size: 15px;
            color: var(--dark);
            font-weight: 500;
        }

        .text-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            font-size: 15px;
            transition: var(--transition);
        }

        .text-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        /* Progress Tabs */
        .progress-tabs {
            display: flex;
            background: white;
            border-top: 2px solid var(--light-gray);
            padding: 15px 30px;
            gap: 10px;
            flex-shrink: 0;
        }

        .progress-tab {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 8px;
            background: var(--light);
            color: var(--gray);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .progress-tab:hover {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .progress-tab.active {
            background: var(--primary);
            color: white;
        }

        .progress-tab .count {
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
        }

        .progress-tab.active .count {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Question Navigation */
        .question-nav {
            position: fixed;
            bottom: 120px;
            right: 30px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 15px;
            z-index: 100;
            width: 300px;
        }

        .question-nav-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--light-gray);
        }

        .question-nav-title {
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
        }

        .question-nav-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }

        .question-nav-item {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            background: var(--light);
            color: var(--gray);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .question-nav-item:hover {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .question-nav-item.answered {
            background: rgba(76, 201, 240, 0.2);
            color: var(--success);
        }

        .question-nav-item.current {
            background: var(--primary);
            color: white;
        }

        /* Submit Section */
        .submit-section {
            background: white;
            border-top: 2px solid var(--light-gray);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .progress-stats {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .progress-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .progress-value {
            font-size: 20px;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
        }

        .progress-label {
            font-size: 12px;
            color: var(--gray);
        }

        .progress-item.answered .progress-value {
            color: var(--success);
        }

        .progress-item.unanswered .progress-value {
            color: var(--gray);
        }

        .progress-item.time .progress-value {
            color: var(--primary);
        }

        .progress-bar-container {
            flex-grow: 1;
            margin: 0 30px;
        }

        .progress-bar {
            height: 8px;
            background: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 90%;
            text-align: center;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-icon {
            font-size: 64px;
            color: var(--success);
            margin-bottom: 20px;
        }

        .modal-title {
            font-family: 'Poppins', sans-serif;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--dark);
        }

        .modal-text {
            color: var(--gray);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(67, 97, 238, 0.3);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #3ab4d9;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 1001;
            transform: translateX(150%);
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-icon {
            font-size: 24px;
            color: var(--success);
        }

        .notification.error .notification-icon {
            color: var(--danger);
        }

        /* Loading */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            z-index: 1002;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 20px;
        }

        .loading.show {
            display: flex;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--light-gray);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scroll to Top Button */
        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--box-shadow);
            z-index: 99;
            transition: var(--transition);
        }

        .scroll-top:hover {
            transform: translateY(-5px);
            background: var(--primary-dark);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .split-screen {
                flex-direction: column;
            }
            
            .passage-panel {
                flex: 0 0 40%;
                border-right: none;
                border-bottom: 2px solid var(--light-gray);
            }
            
            .questions-panel {
                flex: 0 0 60%;
            }
            
            .resize-handle {
                top: auto;
                bottom: -5px;
                right: 0;
                width: 100%;
                height: 10px;
                cursor: row-resize;
            }
            
            .resize-handle::after {
                content: '⋯';
                letter-spacing: 5px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .reading-container {
                height: 90vh;
            }
            
            .passage-panel,
            .questions-panel {
                padding: 15px;
            }
            
            .question-nav {
                display: none;
            }
            
            .submit-section {
                flex-direction: column;
                gap: 15px;
            }
            
            .progress-bar-container {
                width: 100%;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Reading Interface -->
    <div class="container">
        <div class="reading-container">
            <!-- Header -->
            <div class="reading-header">
                <div class="header-left">
                    <button class="back-button" onclick="exitReading()">
                        <i class="fas fa-arrow-left"></i> Exit
                    </button>
                    <div class="test-info">
                        <h2 id="passageTitle">Building a New Future</h2>
                        <p>IELTS Academic Reading • Passage 1</p>
                    </div>
                </div>
                <div class="timer" id="timer">
                    <i class="fas fa-clock"></i>
                    <span id="timeDisplay">20:00</span>
                </div>
            </div>

            <!-- Split Screen -->
            <div class="split-screen">
                <!-- Left: Passage -->
                <div class="passage-panel" id="passagePanel">
                    <div class="passage-header">
                        <h1>READING PASSAGE 1</h1>
                        <p>You should spend about 20 minutes on <strong>Questions 1-13</strong>, which are based on Reading Passage 1.</p>
                    </div>

                    <div class="instruction-box">
                        <i class="fas fa-info-circle"></i>
                        <strong>Instructions:</strong> Read the passage carefully and answer the questions on the right side.
                    </div>

                    <div class="passage-content" id="passageContent">
                        <!-- Passage content will be loaded here -->
                    </div>
                </div>

                <!-- Resize Handle -->
                <div class="resize-handle" id="resizeHandle"></div>

                <!-- Right: Questions -->
                <div class="questions-panel" id="questionsPanel">
                    <!-- Question Type 1: True/False/Not Given -->
                    <div class="question-type" id="trueFalseSection">
                        <div class="question-type-header">
                            <h3 class="question-type-title">Questions 1-5</h3>
                            <span class="question-count">5 questions</span>
                        </div>
                        <p class="question-type-instruction">
                            <i class="fas fa-question-circle"></i>
                            Do the following statements agree with the information given in Reading Passage 1?<br>
                            Write <strong>TRUE</strong>, <strong>FALSE</strong>, or <strong>NOT GIVEN</strong>.
                        </p>

                        <!-- Questions 1-5 -->
                        <div class="question-item" id="q1">
                            <div class="question-number">
                                <span>Question 1</span>
                                <span class="status"></span>
                            </div>
                            <p>Many of the Europeans who first settled in the Taranaki region of New Zealand were descended from dairy farmers.</p>
                            <div class="answer-options">
                                <label class="radio-group">
                                    <input type="radio" name="q1" value="TRUE" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">TRUE</span>
                                </label>
                                <label class="radio-group">
                                    <input type="radio" name="q1" value="FALSE" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">FALSE</span>
                                </label>
                                <label class="radio-group">
                                    <input type="radio" name="q1" value="NOT GIVEN" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">NOT GIVEN</span>
                                </label>
                            </div>
                        </div>

                        <div class="question-item" id="q2">
                            <div class="question-number">
                                <span>Question 2</span>
                                <span class="status"></span>
                            </div>
                            <p>There was an increase in land used for dairy farming in Taranaki in the 1860s.</p>
                            <div class="answer-options">
                                <label class="radio-group">
                                    <input type="radio" name="q2" value="TRUE" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">TRUE</span>
                                </label>
                                <label class="radio-group">
                                    <input type="radio" name="q2" value="FALSE" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">FALSE</span>
                                </label>
                                <label class="radio-group">
                                    <input type="radio" name="q2" value="NOT GIVEN" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">NOT GIVEN</span>
                                </label>
                            </div>
                        </div>

                        <div class="question-item" id="q3">
                            <div class="question-number">
                                <span>Question 3</span>
                                <span class="status"></span>
                            </div>
                            <p>In the 1860s, butter had to be eaten within a few days of being made.</p>
                            <div class="answer-options">
                                <label class="radio-group">
                                    <input type="radio" name="q3" value="TRUE" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">TRUE</span>
                                </label>
                                <label class="radio-group">
                                    <input type="radio" name="q3" value="FALSE" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">FALSE</span>
                                </label>
                                <label class="radio-group">
                                    <input type="radio" name="q3" value="NOT GIVEN" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">NOT GIVEN</span>
                                </label>
                            </div>
                        </div>

                        <div class="question-item" id="q4">
                            <div class="question-number">
                                <span>Question 4</span>
                                <span class="status"></span>
                            </div>
                            <p>Chew Chong's early stores in Taranaki quickly made a profit.</p>
                            <div class="answer-options">
                                <label class="radio-group">
                                    <input type="radio" name="q4" value="TRUE" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">TRUE</span>
                                </label>
                                <label class="radio-group">
                                    <input type="radio" name="q4" value="FALSE" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">FALSE</span>
                                </label>
                                <label class="radio-group">
                                    <input type="radio" name="q4" value="NOT GIVEN" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">NOT GIVEN</span>
                                </label>
                            </div>
                        </div>

                        <div class="question-item" id="q5">
                            <div class="question-number">
                                <span>Question 5</span>
                                <span class="status"></span>
                            </div>
                            <p>In the 1880s, Taranaki milk was the same standard each time it was produced.</p>
                            <div class="answer-options">
                                <label class="radio-group">
                                    <input type="radio" name="q5" value="TRUE" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">TRUE</span>
                                </label>
                                <label class="radio-group">
                                    <input type="radio" name="q5" value="FALSE" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">FALSE</span>
                                </label>
                                <label class="radio-group">
                                    <input type="radio" name="q5" value="NOT GIVEN" onchange="updateProgress()">
                                    <span class="custom-radio"></span>
                                    <span class="radio-label">NOT GIVEN</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Question Type 2: Note Completion -->
                    <div class="question-type" id="noteCompletionSection">
                        <div class="question-type-header">
                            <h3 class="question-type-title">Questions 6-13</h3>
                            <span class="question-count">8 questions</span>
                        </div>
                        <p class="question-type-instruction">
                            <i class="fas fa-edit"></i>
                            Complete the notes below. Choose <strong>ONE WORD ONLY</strong> from the passage for each answer.
                        </p>

                        <div class="instruction-box">
                            <i class="fas fa-lightbulb"></i>
                            <strong>Note:</strong> The dairy factories of Taranaki
                        </div>

                        <!-- Questions 6-13 -->
                        <div class="question-item" id="q6">
                            <div class="question-number">
                                <span>Question 6</span>
                                <span class="status"></span>
                            </div>
                            <p><strong>Chew Chong's 1887 factory</strong><br>
                            • was the first of its sort in the region<br>
                            • was given a significant <input type="text" class="text-input" name="q6" placeholder="(6)" oninput="updateProgress()" maxlength="20">
                            because of the modern techniques used</p>
                        </div>

                        <div class="question-item" id="q7">
                            <div class="question-number">
                                <span>Question 7</span>
                                <span class="status"></span>
                            </div>
                            <p>• sold butter covered in <input type="text" class="text-input" name="q7" placeholder="(7)" oninput="updateProgress()" maxlength="20">
                            for the first time</p>
                        </div>

                        <div class="question-item" id="q8">
                            <div class="question-number">
                                <span>Question 8</span>
                                <span class="status"></span>
                            </div>
                            <p><strong>Factories in the 1890s and early 1900s</strong><br>
                            • farmers set up special companies in order to share the <input type="text" class="text-input" name="q8" placeholder="(8)" oninput="updateProgress()" maxlength="20">
                            from milk sales</p>
                        </div>

                        <div class="question-item" id="q9">
                            <div class="question-number">
                                <span>Question 9</span>
                                <span class="status"></span>
                            </div>
                            <p>• many factories were needed because the local <input type="text" class="text-input" name="q9" placeholder="(9)" oninput="updateProgress()" maxlength="20">
                            were in bad condition</p>
                        </div>

                        <div class="question-item" id="q10">
                            <div class="question-number">
                                <span>Question 10</span>
                                <span class="status"></span>
                            </div>
                            <p>• most factories were built of <input type="text" class="text-input" name="q10" placeholder="(10)" oninput="updateProgress()" maxlength="20">
                            so they were very strong</p>
                        </div>

                        <div class="question-item" id="q11">
                            <div class="question-number">
                                <span>Question 11</span>
                                <span class="status"></span>
                            </div>
                            <p><strong>The decline of dairy factories</strong><br>
                            • companies merged so fewer factories were needed<br>
                            • the Tawhiti factory is now a <input type="text" class="text-input" name="q11" placeholder="(11)" oninput="updateProgress()" maxlength="20"></p>
                        </div>

                        <div class="question-item" id="q12">
                            <div class="question-number">
                                <span>Question 12</span>
                                <span class="status"></span>
                            </div>
                            <p>• the Kaupokonui factory makes equipment for <input type="text" class="text-input" name="q12" placeholder="(12)" oninput="updateProgress()" maxlength="20"></p>
                        </div>

                        <div class="question-item" id="q13">
                            <div class="question-number">
                                <span>Question 13</span>
                                <span class="status"></span>
                            </div>
                            <p>• the Okato factory once more produces <input type="text" class="text-input" name="q13" placeholder="(13)" oninput="updateProgress()" maxlength="20"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Tabs -->
            <div class="progress-tabs">
                <div class="progress-tab active" onclick="scrollToSection('trueFalseSection')">
                    <i class="fas fa-check-circle"></i>
                    <span>True/False/NG (1-5)</span>
                    <span class="count" id="trueFalseCount">0/5</span>
                </div>
                <div class="progress-tab" onclick="scrollToSection('noteCompletionSection')">
                    <i class="fas fa-edit"></i>
                    <span>Note Completion (6-13)</span>
                    <span class="count" id="noteCompletionCount">0/8</span>
                </div>
                <div class="progress-tab" onclick="showQuestionNavigation()">
                    <i class="fas fa-list-ol"></i>
                    <span>All Questions</span>
                    <span class="count" id="totalCount">0/13</span>
                </div>
            </div>

            <!-- Submit Section -->
            <div class="submit-section">
                <div class="progress-stats">
                    <div class="progress-item answered">
                        <div class="progress-value" id="answeredValue">0</div>
                        <div class="progress-label">Answered</div>
                    </div>
                    <div class="progress-item unanswered">
                        <div class="progress-value" id="unansweredValue">13</div>
                        <div class="progress-label">Remaining</div>
                    </div>
                    <div class="progress-item time">
                        <div class="progress-value" id="timeValue">20:00</div>
                        <div class="progress-label">Time Left</div>
                    </div>
                </div>

                <div class="progress-bar-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="clearAllAnswers()">
                        <i class="fas fa-eraser"></i> Clear All
                    </button>
                    <button class="btn btn-primary" onclick="submitAnswers()">
                        <i class="fas fa-paper-plane"></i> Submit Answers
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Question Navigation (Floating) -->
    <div class="question-nav" id="questionNav" style="display: none;">
        <div class="question-nav-header">
            <div class="question-nav-title">Question Navigator</div>
            <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;" onclick="hideQuestionNavigation()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="question-nav-grid" id="questionNavGrid">
            <!-- Question numbers will be generated here -->
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <div class="scroll-top" id="scrollTop" onclick="scrollToTop()">
        <i class="fas fa-chevron-up"></i>
    </div>

    <!-- Modal for Submission -->
    <div class="modal" id="submitModal">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 class="modal-title">Submit Your Answers?</h2>
            <p class="modal-text">
                Are you sure you want to submit your answers? Once submitted, you cannot make changes.<br><br>
                <strong>Answered:</strong> <span id="modalAnswered">0</span>/13 questions<br>
                <strong>Time Used:</strong> <span id="modalTimeUsed">0:00</span>
            </p>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="hideModal()">
                    <i class="fas fa-edit"></i> Review More
                </button>
                <button class="btn btn-primary" onclick="confirmSubmit()">
                    <i class="fas fa-check"></i> Yes, Submit
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-rocket"></i>
            </div>
            <h2 class="modal-title">Answers Submitted!</h2>
            <p class="modal-text" id="submissionMessage">
                Your answers have been sent to the Telegram group. You can check your answers there.
            </p>
            <div class="modal-buttons">
                <button class="btn btn-primary" onclick="returnToMenu()">
                    <i class="fas fa-home"></i> Back to Menu
                </button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div>
            <div style="font-weight: 600;" id="notificationTitle">Success</div>
            <div style="font-size: 14px; color: var(--gray);" id="notificationMessage">Operation completed successfully</div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <div style="font-family: 'Poppins', sans-serif; font-size: 18px; font-weight: 600; color: var(--dark);">
            Sending to Telegram...
        </div>
        <div style="color: var(--gray); font-size: 14px;">
            Please wait a moment
        </div>
    </div>

    <script>
        // Global variables
        let timerInterval = null;
        let timeLeft = 1200; // 20 minutes in seconds
        let totalQuestions = 13;
        let currentQuestion = 1;
        let isResizing = false;
        let resizeStartX = 0;
        let passagePanelWidth = 50; // Percentage

        // Passage content
        const passageContent = `
            <h2 style="margin: 25px 0 15px 0; color: var(--dark);">Building a New Future</h2>
            <p>As agriculture in New Zealand has changed over time, some buildings once associated with the farming industry have found new uses.</p>
            
            <p>The first European settlers arrived in the Taranaki region of New Zealand in 1841. Their initial aim was not to be dairy farmers - who keep cows for their milk and make dairy products such as butter. In fact, the dense bush was cleared to grow commercial crops of wheat. However, most of the settlers came from the English counties of Devon and Cornwall, where for generations their families had been involved in dairy farming, so it was natural for them to keep cows for domestic purposes. Throughout the 1840s women made butter for their families, and any extra was traded at local stores for other goods that they would normally have needed to pay for. By the 1860s some farmers had recognised that the region's future lay in grasslands for dairy cows, not crops, and new dairy farms were created as a result. At the same time, a corresponding growth in farmhouse butter production led to a surplus, so clever merchants began packing butter in barrels, preserving it either in brine or layers of dry salt so that it would last for up to two months, and sending it to other parts of the country.</p>
            
            <p>One early trader was a Chinese entrepreneur called Chew Chong, whose name is closely linked to dairy farming in Taranaki. He arrived in the area in 1870 via the goldfields of Australia, determined to try something new, namely travelling throughout the district selling essential goods and buying 'Taranaki wool' - a type of edible fungus that was exported to China. Chew Chong opened several stores around Taranaki and began buying excess farmhouse butter, which he packed for resale, even attempting to export it to Australia and England. In 1882, the development of the first refrigerated ships created greater economic potential for the Taranaki dairy farming industry, because it allowed fresh produce to be traded to distant cities. As a result, the first small factories were built in the region in order to process local milk. However, throughout the 1880s the industry was characterised by two particular problems: inconsistent quality control and irregular supply.</p>
            
            <p>In 1887 a new era began when Chew Chong built his own dairy products factory near the town of Eltham. Initially called Riverside, and later Jubilee, Chew Chong's state-of-the-art factory attracted so much admiration that in 1889 he won a prestigious award for its production methods. Jubilee was the first New Zealand dairy factory to install a refrigeration machine, and is believed to have been the first to produce rectangular blocks of butter weighing 1 pound (0.45 kilograms) and to wrap them in paper, also making it possible for the place of origin to be shown.</p>
            
            <p>In the 1890s, with prospects for the dairy industry looking better and better, Taranaki farmers began to form special companies called 'cooperatives', which gave each of them a larger proportion of the profits made by the industry as a whole. By the early 1900s, the cooperative system dominated the industry, forcing the closure of some smaller independent factories like Jubilee in 1901. Another factor influencing development was that the roads in the area were very rough and badly maintained, so factories were located every few kilometres, becoming the focus of rural communities. From the early 1900s onwards, these factories were constructed in concrete, so the structures were solid and practical, making them ideally suited for industrial or agricultural enterprises.</p>
            
            <p>The decline of Taranaki's small dairy factories has been long and slow. As technology improved, dairy cooperative companies joined together until, by 1992, only a single large factory survived in the region. Some of those that closed have been demolished, while many are used for other purposes. The factory at Tawhiti, for example, closed in 1967 and was subsequently bought by a local artist. Today the building houses an acclaimed museum, where artworks and artefacts jointly depict aspects of Taranaki history. Further around the coast, the Kaupokonui factory had been one of the most successful dairy cooperatives in the country until a merger in 1962 saw the building closed. Soon afterwards, however, the complex became the base for an international company manufacturing natural gut strings for tennis racquets. The company continues to provide employment for locals, and the buildings have not undergone any significant alterations.</p>
            
            <p>While other Taranaki factories are today used for substantially different purposes from milk processing, the Okato factory recently returned to its original function. The factory closed in 1985 and was subsequently used as a youth hostel and an entertainment venue. Then in late 2009, Organic Dairy Ltd. again started to manufacture cheese on the site. A new multi-million dollar plant was built, and once again milk tankers call daily to supply the raw materials. So for at least one of Taranaki's old dairy factories, it seems things have come full circle.</p>
        `;

        // Initialize the reading interface
        function initReadingInterface() {
            // Load passage content
            document.getElementById('passageContent').innerHTML = passageContent;
            
            // Initialize timer
            updateTimerDisplay();
            startTimer();
            
            // Initialize resize functionality
            initResizeHandler();
            
            // Generate question navigation
            generateQuestionNavigation();
            
            // Update progress initially
            updateProgress();
            
            // Show scroll to top button on scroll
            window.addEventListener('scroll', handleScroll);
            
            // Auto-save every 30 seconds
            setInterval(autoSave, 30000);
            
            // Load saved answers if any
            loadSavedAnswers();
        }

        // Timer functions
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showNotification('Time is up! Submitting your answers...', 'error');
                    setTimeout(() => submitAnswers(), 2000);
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('timeDisplay').textContent = timeString;
            document.getElementById('timeValue').textContent = timeString;
            
            // Update timer color based on remaining time
            const timerElement = document.getElementById('timer');
            timerElement.classList.remove('warning', 'danger');
            
            if (timeLeft < 300) timerElement.classList.add('danger');
            else if (timeLeft < 600) timerElement.classList.add('warning');
        }

        // Resize functionality
        function initResizeHandler() {
            const resizeHandle = document.getElementById('resizeHandle');
            const passagePanel = document.getElementById('passagePanel');
            const questionsPanel = document.getElementById('questionsPanel');
            
            resizeHandle.addEventListener('mousedown', startResize);
            
            function startResize(e) {
                isResizing = true;
                resizeStartX = e.clientX;
                passagePanelWidth = passagePanel.getBoundingClientRect().width / window.innerWidth * 100;
                
                document.addEventListener('mousemove', resize);
                document.addEventListener('mouseup', stopResize);
                
                e.preventDefault();
            }
            
            function resize(e) {
                if (!isResizing) return;
                
                const dx = e.clientX - resizeStartX;
                const containerWidth = document.querySelector('.split-screen').getBoundingClientRect().width;
                const deltaPercent = (dx / containerWidth) * 100;
                
                let newWidth = passagePanelWidth + deltaPercent;
                
                // Limit between 30% and 70%
                newWidth = Math.max(30, Math.min(70, newWidth));
                
                passagePanel.style.flex = `0 0 ${newWidth}%`;
                questionsPanel.style.flex = `0 0 ${100 - newWidth}%`;
            }
            
            function stopResize() {
                isResizing = false;
                document.removeEventListener('mousemove', resize);
                document.removeEventListener('mouseup', stopResize);
            }
        }

        // Progress tracking
        function updateProgress() {
            let answered = 0;
            let trueFalseAnswered = 0;
            let noteCompletionAnswered = 0;
            
            // Check True/False/Not Given questions (1-5)
            for (let i = 1; i <= 5; i++) {
                const radios = document.querySelectorAll(`input[name="q${i}"]`);
                let isAnswered = false;
                
                for (let radio of radios) {
                    if (radio.checked) {
                        isAnswered = true;
                        trueFalseAnswered++;
                        break;
                    }
                }
                
                // Update question status indicator
                const statusElement = document.querySelector(`#q${i} .status`);
                if (statusElement) {
                    statusElement.className = 'status';
                    if (isAnswered) {
                        statusElement.classList.add('answered');
                    }
                }
            }
            
            // Check Note Completion questions (6-13)
            for (let i = 6; i <= 13; i++) {
                const input = document.querySelector(`input[name="q${i}"]`);
                const isAnswered = input && input.value.trim() !== '';
                
                // Update question status indicator
                const statusElement = document.querySelector(`#q${i} .status`);
                if (statusElement) {
                    statusElement.className = 'status';
                    if (isAnswered) {
                        statusElement.classList.add('answered');
                        noteCompletionAnswered++;
                    }
                }
            }
            
            answered = trueFalseAnswered + noteCompletionAnswered;
            const unanswered = totalQuestions - answered;
            const percentage = Math.round((answered / totalQuestions) * 100);
            
            // Update counters
            document.getElementById('trueFalseCount').textContent = `${trueFalseAnswered}/5`;
            document.getElementById('noteCompletionCount').textContent = `${noteCompletionAnswered}/8`;
            document.getElementById('totalCount').textContent = `${answered}/${totalQuestions}`;
            
            // Update progress values
            document.getElementById('answeredValue').textContent = answered;
            document.getElementById('unansweredValue').textContent = unanswered;
            
            // Update progress bar
            document.getElementById('progressFill').style.width = `${percentage}%`;
            
            // Update question navigation
            updateQuestionNavigation();
            
            // Auto-save answers
            saveAnswers();
        }

        // Generate question navigation
        function generateQuestionNavigation() {
            const navGrid = document.getElementById('questionNavGrid');
            navGrid.innerHTML = '';
            
            for (let i = 1; i <= totalQuestions; i++) {
                const navItem = document.createElement('div');
                navItem.className = 'question-nav-item';
                navItem.textContent = i;
                navItem.dataset.question = i;
                
                navItem.addEventListener('click', () => {
                    scrollToQuestion(i);
                });
                
                navGrid.appendChild(navItem);
            }
            
            updateQuestionNavigation();
        }

        function updateQuestionNavigation() {
            const navItems = document.querySelectorAll('.question-nav-item');
            
            navItems.forEach(item => {
                const questionNum = parseInt(item.dataset.question);
                item.classList.remove('answered', 'current');
                
                // Check if answered
                if (questionNum <= 5) {
                    // True/False question
                    const radios = document.querySelectorAll(`input[name="q${questionNum}"]`);
                    let isAnswered = false;
                    for (let radio of radios) {
                        if (radio.checked) {
                            isAnswered = true;
                            break;
                        }
                    }
                    if (isAnswered) {
                        item.classList.add('answered');
                    }
                } else {
                    // Note completion question
                    const input = document.querySelector(`input[name="q${questionNum}"]`);
                    if (input && input.value.trim() !== '') {
                        item.classList.add('answered');
                    }
                }
                
                // Check if current
                if (questionNum === currentQuestion) {
                    item.classList.add('current');
                }
            });
        }

        // Scroll functions
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function scrollToQuestion(questionNum) {
            const questionElement = document.getElementById(`q${questionNum}`);
            if (questionElement) {
                questionElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                questionElement.style.backgroundColor = 'rgba(67, 97, 238, 0.1)';
                
                // Remove highlight after 2 seconds
                setTimeout(() => {
                    questionElement.style.backgroundColor = '';
                }, 2000);
                
                currentQuestion = questionNum;
                updateQuestionNavigation();
            }
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function handleScroll() {
            const scrollTopBtn = document.getElementById('scrollTop');
            if (window.scrollY > 300) {
                scrollTopBtn.style.display = 'flex';
            } else {
                scrollTopBtn.style.display = 'none';
            }
        }

        // Question navigation panel
        function showQuestionNavigation() {
            const nav = document.getElementById('questionNav');
            if (nav.style.display === 'none' || nav.style.display === '') {
                nav.style.display = 'block';
            } else {
                nav.style.display = 'none';
            }
        }

        function hideQuestionNavigation() {
            document.getElementById('questionNav').style.display = 'none';
        }

        // Clear all answers
        function clearAllAnswers() {
            if (!confirm('Are you sure you want to clear all answers? This action cannot be undone.')) {
                return;
            }
            
            // Clear radio buttons
            for (let i = 1; i <= 5; i++) {
                const radios = document.querySelectorAll(`input[name="q${i}"]`);
                radios.forEach(radio => radio.checked = false);
            }
            
            // Clear text inputs
            for (let i = 6; i <= 13; i++) {
                const input = document.querySelector(`input[name="q${i}"]`);
                if (input) input.value = '';
            }
            
            // Clear saved data
            localStorage.removeItem('ieltsReadingAnswers');
            localStorage.removeItem('ieltsReadingTime');
            
            updateProgress();
            showNotification('All answers cleared successfully', 'success');
        }

        // Submit answers
        function submitAnswers() {
            const answered = parseInt(document.getElementById('answeredValue').textContent);
            const timeUsed = 1200 - timeLeft;
            const minutesUsed = Math.floor(timeUsed / 60);
            const secondsUsed = timeUsed % 60;
            
            document.getElementById('modalAnswered').textContent = answered;
            document.getElementById('modalTimeUsed').textContent = `${minutesUsed}:${secondsUsed.toString().padStart(2, '0')}`;
            
            document.getElementById('submitModal').style.display = 'flex';
        }

        function hideModal() {
            document.getElementById('submitModal').style.display = 'none';
        }

        function confirmSubmit() {
            hideModal();
            document.getElementById('loading').classList.add('show');
            
            // Collect answers
            const answers = {};
            for (let i = 1; i <= totalQuestions; i++) {
                if (i <= 5) {
                    const selected = document.querySelector(`input[name="q${i}"]:checked`);
                    answers[`q${i}`] = selected ? selected.value : 'NOT ANSWERED';
                } else {
                    const input = document.querySelector(`input[name="q${i}"]`);
                    answers[`q${i}`] = input ? input.value.trim() || 'NOT ANSWERED' : 'NOT ANSWERED';
                }
            }
            
            // Prepare submission data
            const submissionData = {
                passage: 'Building a New Future',
                timeSpent: 1200 - timeLeft,
                answers: answers,
                timestamp: new Date().toISOString(),
                totalQuestions: totalQuestions
            };
            
            // Send to Telegram (simulated for demo)
            setTimeout(() => {
                document.getElementById('loading').classList.remove('show');
                document.getElementById('successModal').style.display = 'flex';
                
                // For demo purposes, log the submission
                console.log('Submission Data:', submissionData);
                
                // Clear saved data
                localStorage.removeItem('ieltsReadingAnswers');
                localStorage.removeItem('ieltsReadingTime');
                
                showNotification('Answers submitted successfully!', 'success');
            }, 2000);
        }

        // Save/Load answers
        function saveAnswers() {
            const answers = {};
            
            // Save radio button answers
            for (let i = 1; i <= 5; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                if (selected) {
                    answers[`q${i}`] = selected.value;
                }
            }
            
            // Save text input answers
            for (let i = 6; i <= 13; i++) {
                const input = document.querySelector(`input[name="q${i}"]`);
                if (input && input.value.trim() !== '') {
                    answers[`q${i}`] = input.value.trim();
                }
            }
            
            // Save to localStorage
            localStorage.setItem('ieltsReadingAnswers', JSON.stringify(answers));
            localStorage.setItem('ieltsReadingTime', timeLeft.toString());
        }

        function loadSavedAnswers() {
            const savedAnswers = localStorage.getItem('ieltsReadingAnswers');
            const savedTime = localStorage.getItem('ieltsReadingTime');
            
            if (savedAnswers) {
                const answers = JSON.parse(savedAnswers);
                
                // Load radio button answers
                for (let i = 1; i <= 5; i++) {
                    if (answers[`q${i}`]) {
                        const radio = document.querySelector(`input[name="q${i}"][value="${answers[`q${i}`]}"]`);
                        if (radio) {
                            radio.checked = true;
                        }
                    }
                }
                
                // Load text input answers
                for (let i = 6; i <= 13; i++) {
                    if (answers[`q${i}`]) {
                        const input = document.querySelector(`input[name="q${i}"]`);
                        if (input) {
                            input.value = answers[`q${i}`];
                        }
                    }
                }
                
                showNotification('Previous answers loaded successfully', 'success');
            }
            
            if (savedTime) {
                timeLeft = parseInt(savedTime);
                updateTimerDisplay();
            }
        }

        function autoSave() {
            saveAnswers();
            // Optional: Show a subtle notification
            console.log('Auto-saved at', new Date().toLocaleTimeString());
        }

        // Navigation functions
        function exitReading() {
            if (confirm('Are you sure you want to exit? Your progress will be saved.')) {
                saveAnswers();
                if (timerInterval) clearInterval(timerInterval);
                // In a real app, this would navigate back to the main menu
                alert('Returning to main menu...');
            }
        }

        function returnToMenu() {
            document.getElementById('successModal').style.display = 'none';
            if (timerInterval) clearInterval(timerInterval);
            // In a real app, this would navigate back to the main menu
            alert('Returning to main menu...');
        }

        // Notification system
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const title = document.getElementById('notificationTitle');
            const msg = document.getElementById('notificationMessage');
            
            notification.classList.remove('error');
            if (type === 'error') {
                notification.classList.add('error');
                title.textContent = 'Error';
            } else {
                title.textContent = 'Success';
            }
            
            msg.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initReadingInterface);
    </script>
</body>
</html>
